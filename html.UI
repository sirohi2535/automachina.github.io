<script>
// Fetch Core Status
async function fetchStatus(){
    try {
        const res = await fetch("http://127.0.0.1:5000/status");
        const data = await res.json();
        document.getElementById("earnings").innerText = data.earnings.toFixed(2);
        document.getElementById("tokens").innerText = data.tokens;
        document.getElementById("status").innerText = data.status;

        const logsDiv = document.getElementById("logs");
        logsDiv.innerHTML = data.logs.map(l => "> " + l).join("<br>");
        logsDiv.scrollTop = logsDiv.scrollHeight;
    } catch(e){
        console.error("API Error:", e);
    }
}

// Trigger simulate earnings
async function simulateEarnings(){
    await fetch("http://127.0.0.1:5000/simulate_earnings", { method:"POST" });
    fetchStatus();
}

// Trigger force payout
async function forcePayout(){
    await fetch("http://127.0.0.1:5000/force_payout", { method:"POST" });
    fetchStatus();
}

// Auto refresh every 3 seconds
setInterval(fetchStatus, 3000);
fetchStatus();
</script>
